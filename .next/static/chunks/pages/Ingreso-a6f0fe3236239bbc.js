(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[649],{4825:e=>{e.exports={mainIngresoContainer:"Ingreso_mainIngresoContainer__gCSx2",error:"Ingreso_error__jBcpg",formOptions:"Ingreso_formOptions__Xx5UD",active:"Ingreso_active__1FPNa",inactive:"Ingreso_inactive__4lm_w",ingresoContainer:"Ingreso_ingresoContainer__xhpiW"}},8598:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Ingreso",function(){return r(9878)}])},9878:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d});var a=r(3576),o=r(2701),n=r(7876),i=r(4232),t=r(9099),l=r(4825),u=r.n(l),c=r(1898);let d=()=>{let[e,s]=(0,i.useState)({usnombre:"",usmail:"",uspass:"",passwordConfirm:""}),[r,l]=(0,i.useState)("registro"),[d,m]=(0,i.useState)(""),{login:p}=(0,c.A)(),h=r=>{let{name:n,value:i}=r.target;s((0,o._)((0,a._)({},e),{[n]:i}))},g=async s=>{if(s.preventDefault(),console.log("Form Data Submitted:",e),"registro"===r){if(e.uspass!==e.passwordConfirm)return void alert("las contrase\xf1as no coinciden");try{let s=await fetch("./api/requests/usuario",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer token"},body:JSON.stringify(e)}),r=await s.json();if(!s.ok)throw Error(r.error||"Error en registro");console.log("usuario registrado: ",r),m(""),await p(),t.Router.push("/")}catch(e){console.error("Error al registrar: ",e)}}else if("sesion"===r)try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await s.json();if(!s.ok)return void m(r.error||"Error en login");console.log("Usuario autenticado:",r),await p(),m("")}catch(e){m(),console.error("Error al iniciar sesi\xf3n:",e)}},w=e=>{l(e)};return(0,n.jsx)("div",{className:u().mainIngresoContainer,children:(0,n.jsxs)("div",{className:u().ingresoContainer,children:[(0,n.jsxs)("div",{className:u().formOptions,children:[(0,n.jsx)("h2",{onClick:()=>w("registro"),className:"registro"===r?u().active:u().inactive,children:"Registrarse"}),(0,n.jsx)("span",{children:"|"}),(0,n.jsx)("h2",{onClick:()=>w("sesion"),className:"sesion"===r?u().active:u().inactive,children:"Iniciar sesi\xf3n"})]}),"registro"===r?(0,n.jsxs)("form",{onSubmit:g,className:u().registerForm,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"username",children:"Username:"}),(0,n.jsx)("input",{type:"text",className:u().usernameInput,name:"usnombre",value:e.usnombre,placeholder:"nombre de usuario",onChange:h,autoComplete:"username",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,n.jsx)("input",{type:"email",className:u().emailInput,name:"usmail",value:e.usmail,placeholder:"correo electr\xf3nico",onChange:h,autoComplete:"email",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,n.jsx)("input",{type:"password",className:u().passwordInput,name:"uspass",value:e.uspass,placeholder:"contrase\xf1a",onChange:h,autoComplete:"new-password",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"passwordConfirm",children:"Password Confirm:"}),(0,n.jsx)("input",{type:"password",className:u().passwordInput,name:"passwordConfirm",value:e.passwordConfirm,placeholder:"confirme su contrase\xf1a",onChange:h,autoComplete:"new-password",required:!0})]}),(0,n.jsx)("button",{type:"submit",className:u().passwordInput,children:"Register"})]}):"sesion"===r&&(0,n.jsxs)("form",{onSubmit:g,className:u().sesionForm,children:[d&&(0,n.jsx)("p",{className:u().error,children:d}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"username",children:"Username:"}),(0,n.jsx)("input",{type:"text",className:u().usernameInput,name:"usnombre",value:e.usnombre,placeholder:"nombre de usuario",onChange:h,autoComplete:"username",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,n.jsx)("input",{type:"password",className:u().passwordInput,name:"uspass",value:e.uspass,placeholder:"contrase\xf1a",onChange:h,autoComplete:"current-password",required:!0})]}),(0,n.jsx)("button",{type:"submit",className:u().passwordInput,children:"Register"})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[636,593,792],()=>s(8598)),_N_E=e.O()}]);