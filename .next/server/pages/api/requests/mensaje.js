"use strict";(()=>{var e={};e.id=647,e.ids=[647],e.modules={2983:(e,t,a)=>{a.d(t,{A:()=>r});let n=require("mysql2/promise"),r=a.n(n)().createPool({host:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME,waitForConnections:!0,connectionLimit:10,queueLimit:0})},3480:(e,t,a)=>{e.exports=a(5600)},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},7745:(e,t,a)=>{a.r(t),a.d(t,{config:()=>j,default:()=>E,routeModule:()=>A});var n={};a.r(n),a.d(n,{createMensaje:()=>c,default:()=>f,deleteMensaje:()=>m,getAllMensajes:()=>u,getMensajeById:()=>l,updateMensaje:()=>d});var r=a(3480),s=a(8667),o=a(6435),i=a(2983);async function u(){let e;try{e=await i.A.getConnection();let[t]=await e.query("SELECT * FROM mensaje;");return t}catch(e){throw Error("getAllMensajes error al obtener los mensajes: "+e.message)}finally{e&&e.release()}}async function l(e){let t;try{t=await i.A.getConnection();let[a]=await t.execute("SELECT * FROM mensaje WHERE idmensaje = ?"+[e]);return a}catch(e){throw Error("getMensajeById error al obtener al mensaje: "+e.message)}finally{t&&t.release()}}async function c(e){let t;try{t=await i.A.getConnection();var a=[e.asunto,e.email,e.idusuario,e.mensaje,e.nombre];let[n]=await t.execute("INSERT INTO mensaje (asunto,email,idusuario,mensajecontacto,nombre) VALUES (?,?,?,?,?);",a);return n.insertId}catch(e){throw Error("createMensaje error al crear mensaje: "+e.message)}finally{t&&t.release()}}async function d(e,t){let a;try{a=await i.A.getConnection();var n="UPDATE mensaje SET ",r=[],s=0;for(let[e,a]of Object.entries(t))void 0!==a&&(++s>1&&(n+=", "),n+=`${e} = ?`,r.push(a));r.push(e),n+=" WHERE idmensaje = ? ;";let[o]=await a.execute(n,r);return o.affectedRows}catch(e){throw Error("updateMensaje error al actualizar mensaje: "+e.message)}finally{a&&a.release()}}async function m(e){let t;try{t=await i.A.getConnection();let[a]=await t.execute("DELETE FROM mensaje WHERE idmensaje = ?",[e]);return a.affectedRows}catch(e){throw Error("deleteMensaje error al eliminar mensaje: "+e.message)}finally{t&&t.release()}}function f(e,t){t.status(200).json({message:"\xa1Hola desde mensaje!"})}let E=(0,o.M)(n,"default"),j=(0,o.M)(n,"config"),A=new r.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/requests/mensaje",pathname:"/api/requests/mensaje",bundlePath:"",filename:""},userland:n})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return a}});var a=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=t(t.s=7745);module.exports=a})();