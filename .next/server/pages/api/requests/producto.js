"use strict";(()=>{var e={};e.id=660,e.ids=[660],e.modules={2983:(e,t,r)=>{r.d(t,{A:()=>n});let o=require("mysql2/promise"),n=r.n(o)().createPool({host:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME,waitForConnections:!0,connectionLimit:10,queueLimit:0})},3480:(e,t,r)=>{e.exports=r(5600)},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9087:(e,t,r)=>{r.r(t),r.d(t,{config:()=>E,default:()=>f,routeModule:()=>A});var o={};r.r(o),r.d(o,{createProducto:()=>s,default:()=>P,deleteProducto:()=>p,getAllProductos:()=>i,getProductoById:()=>d,updateProducto:()=>l});var n=r(3480),a=r(8667),c=r(6435),u=r(2983);async function i(){let e;try{e=await u.A.getConnection();let[t]=await e.query("SELECT * FROM producto;");return t}catch(e){throw Error("getAllProductos error al obtener los productos: "+e.message)}finally{e&&e.release()}}async function d(e){let t;try{t=await u.A.getConnection();let[r]=await t.execute("SELECT * FROM producto WHERE idproducto = ?"+[e]);return r}catch(e){throw Error("getProductoById error al obtener el producto: "+e.message)}finally{t&&t.release()}}async function s(e){let t;try{t=await u.A.getConnection();var r=[e.detalleprod,e.nombreprod,e.origenprod,e.precioprod,e.stockprod];let[o]=await t.execute("INSERT INTO producto (detalleprod,nombreprod,origenprod,precioprod,stockprod) VALUES (?,?,?,?,?);",r);return o.insertId}catch(e){throw Error("createProducto error al crear producto: "+e.message)}finally{t&&t.release()}}async function l(e,t){let r;try{r=await u.A.getConnection();var o="UPDATE producto SET ",n=[],a=0;for(let[e,r]of Object.entries(t))void 0!==r&&(++a>1&&(o+=", "),o+=`${e} = ?`,n.push(r));n.push(e),o+=" WHERE idproducto = ? ;";let[c]=await r.execute(o,n);return c.affectedRows}catch(e){throw Error("updateProducto error al actualizar producto: "+e.message)}finally{r&&r.release()}}async function p(e){let t;try{t=await u.A.getConnection();let[r]=await t.execute("DELETE FROM producto WHERE idproducto = ?",[e]);return r.affectedRows}catch(e){throw Error("deleteProducto error al eliminar producto: "+e.message)}finally{t&&t.release()}}function P(e,t){t.status(200).json({message:"\xa1Hola desde producto!"})}let f=(0,c.M)(o,"default"),E=(0,c.M)(o,"config"),A=new n.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/requests/producto",pathname:"/api/requests/producto",bundlePath:"",filename:""},userland:o})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=9087);module.exports=r})();