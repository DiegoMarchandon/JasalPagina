"use strict";(()=>{var e={};e.id=850,e.ids=[850],e.modules={2983:(e,t,i)=>{i.d(t,{A:()=>o});let r=require("mysql2/promise"),o=i.n(r)().createPool({host:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME,waitForConnections:!0,connectionLimit:10,queueLimit:0})},3480:(e,t,i)=>{e.exports=i(5600)},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,i){return i in t?t[i]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,i)):"function"==typeof t&&"default"===i?t:void 0}}})},7161:(e,t,i)=>{i.r(t),i.d(t,{config:()=>E,default:()=>f,routeModule:()=>P});var r={};i.r(r),i.d(r,{createPedidoItem:()=>l,default:()=>m,deletePedidoItem:()=>p,getAllpedidoItems:()=>s,getPedidoItemById:()=>c,updatePedidoItem:()=>u});var o=i(3480),d=i(8667),a=i(6435),n=i(2983);async function s(){let e;try{e=await n.A.getConnection();let[t]=await e.query("SELECT * FROM pedidoitem;");return t}catch(e){throw Error("getAllpedidoItems error al obtener los pedidoitems: "+e.message)}finally{e&&e.release()}}async function c(e){let t;try{t=await n.A.getConnection();let[i]=await t.execute("SELECT * FROM pedidoitem WHERE idpedidoitem = ?"+[e]);return i}catch(e){throw Error("getPedidoItemById error al obtener el pedidoitem: "+e.message)}finally{t&&t.release()}}async function l(e){let t;try{t=await n.A.getConnection();var i=[e.cantidad,e.idpedido,e.idproducto];let[r]=await t.execute("INSERT INTO pedidoitem (cantidad,idpedido,idproducto) VALUES (?,?,?);",i);return r.insertId}catch(e){throw Error("createPedidoItem error al crear pedidoitem: "+e.message)}finally{t&&t.release()}}async function u(e,t){let i;try{i=await n.A.getConnection();var r="UPDATE pedidoitem SET ",o=[],d=0;for(let[e,i]of Object.entries(t))void 0!==i&&(++d>1&&(r+=", "),r+=`${e} = ?`,o.push(i));o.push(e),r+=" WHERE idpedidoitem = ? ;";let[a]=await i.execute(r,o);return a.affectedRows}catch(e){throw Error("updatePedidoItem error al actualizar pedidoitem: "+e.message)}finally{i&&i.release()}}async function p(e){let t;try{t=await n.A.getConnection();let[i]=await t.execute("DELETE FROM pedidoitem WHERE idpedidoitem = ?",[e]);return i.affectedRows}catch(e){throw Error("deletePedidoItem error al eliminar pedidoitem: "+e.message)}finally{t&&t.release()}}function m(e,t){t.status(200).json({message:"\xa1Hola desde pedidoitem!"})}let f=(0,a.M)(r,"default"),E=(0,a.M)(r,"config"),P=new o.PagesAPIRouteModule({definition:{kind:d.A.PAGES_API,page:"/api/requests/pedidoitem",pathname:"/api/requests/pedidoitem",bundlePath:"",filename:""},userland:r})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return i}});var i=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var i=t(t.s=7161);module.exports=i})();